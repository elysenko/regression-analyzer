---
name: Implement feature importance and StatsEngine orchestrator
status: open
created: 2026-01-20T19:39:00Z
updated: 2026-01-20T19:40:31Z
github: https://github.com/elysenko/regression-analyzer/issues/12
depends_on: [10, 11]
parallel: false
conflicts_with: []
---

# Task: Implement feature importance and StatsEngine orchestrator

## Description

Create the Random Forest feature importance calculation using permutation importance, and the StatsEngine orchestrator class that combines all statistical analyses.

## Acceptance Criteria

- [ ] Create `src/regression_analyzer/stats/feature_importance.py` with `calculate_feature_importance()` function
- [ ] Use `permutation_importance()` instead of tree's `feature_importances_` (unbiased)
- [ ] Rank features by importance with standard deviation
- [ ] Generate human-readable interpretation
- [ ] Create `src/regression_analyzer/stats/__init__.py` with `StatsEngine` class
- [ ] StatsEngine auto-detects target and features if not provided
- [ ] StatsEngine aggregates warnings and errors
- [ ] Export all public functions and models

## Technical Details

### Files to Create
- `src/regression_analyzer/stats/feature_importance.py`
- `src/regression_analyzer/stats/__init__.py`

### feature_importance.py Implementation
- `calculate_feature_importance(df, target, features, n_estimators, n_repeats)`: Returns FeatureImportanceResult
- Fit RandomForestRegressor
- Use `permutation_importance()` on test set
- Sort and rank features
- `_interpret_importance()`: Human-readable summary

### __init__.py Implementation
- `StatsEngine` class with `analyze()` method
- Auto-detect numeric columns
- Auto-select target (last numeric) and features if not provided
- Run minmax, regression, and importance with error handling
- Return StatisticsReport with all results and warnings
- Export all public APIs

## Dependencies

- Tasks 10 and 11 must be complete
- scikit-learn (RandomForestRegressor, permutation_importance)

## Effort Estimate

- Size: M
- Hours: 1
- Parallel: false

## Definition of Done

- [ ] Feature importance uses permutation_importance
- [ ] StatsEngine orchestrates all analyses
- [ ] Can be imported: `from regression_analyzer.stats import StatsEngine`
- [ ] Auto-detection works correctly
