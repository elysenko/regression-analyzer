---
name: Write comprehensive tests for stats module
status: open
created: 2026-01-20T19:39:00Z
updated: 2026-01-20T19:40:31Z
github: https://github.com/elysenko/regression-analyzer/issues/13
depends_on: [10, 11, 12]
parallel: false
conflicts_with: []
---

# Task: Write comprehensive tests for stats module

## Description

Create comprehensive test suite for the statistics engine module covering all Pydantic models, min/max analysis, linear regression, feature importance, and the StatsEngine orchestrator.

## Acceptance Criteria

- [ ] Create `tests/stats/` directory with `__init__.py`
- [ ] Test all Pydantic models validate correctly
- [ ] Test `analyze_minmax()` finds correct min/max with context
- [ ] Test `run_linear_regression()` with known linear data (R² > 0.95)
- [ ] Test coefficient recovery within 10% for known relationships
- [ ] Test p-values correctly identify significant predictors
- [ ] Test `calculate_feature_importance()` ranks strongest predictor first
- [ ] Test StatsEngine orchestrator with full pipeline
- [ ] Test auto-detection of target and features
- [ ] Test error handling for insufficient data
- [ ] All tests pass with `pytest tests/stats/`

## Technical Details

### Files to Create
- `tests/stats/__init__.py`
- `tests/stats/test_models.py`
- `tests/stats/test_minmax.py`
- `tests/stats/test_regression.py`
- `tests/stats/test_feature_importance.py`
- `tests/stats/test_stats_engine.py`

### Key Test Cases (per PRD)
- Known linear relationship: y = 2*x1 + 3*x2 + noise
  - R² > 0.95
  - Coefficients within 10% of true values
- Feature importance ranking: x1 strongly predicts, x3 is noise
  - x1 should rank first
- Min/max with context verification
- Insufficient data error handling

## Dependencies

- pytest>=8.0.0
- Tasks 10, 11, and 12 must be complete

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: false

## Definition of Done

- [ ] All test files created
- [ ] Tests cover all acceptance criteria from PRD
- [ ] `pytest tests/stats/` passes with 0 failures
- [ ] Coverage includes edge cases and error handling
