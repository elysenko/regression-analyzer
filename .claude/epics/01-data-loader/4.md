---
name: Write comprehensive tests for loader module
status: open
created: 2026-01-20T19:16:59Z
updated: 2026-01-20T19:18:36Z
github: https://github.com/elysenko/regression-analyzer/issues/4
depends_on: [2, 3]
parallel: false
conflicts_with: []
---

# Task: Write comprehensive tests for loader module

## Description

Create comprehensive test suite for the data loader module covering CSV loading with various encodings, Excel loading, transpose functionality, and metadata extraction.

## Acceptance Criteria

- [ ] Create `tests/loader/` directory with `__init__.py`
- [ ] Test CSV loading with UTF-8 encoding
- [ ] Test CSV loading with Latin-1 encoding
- [ ] Test CSV loading with fallback encoding chain
- [ ] Test Excel (.xlsx) loading
- [ ] Test `transpose_dataframe()` function
- [ ] Test `should_transpose_heuristic()` function
- [ ] Test `get_metadata()` returns correct info
- [ ] Test error handling for missing files
- [ ] Test error handling for unsupported formats
- [ ] All tests pass with `pytest tests/loader/`

## Technical Details

### Files to Create
- `tests/loader/__init__.py`
- `tests/loader/test_data_loader.py`
- `tests/loader/test_encoding.py`
- `tests/loader/test_transpose.py`

### Test Patterns
- Use `tmp_path` fixture for creating test files
- Test both happy path and error cases
- Use `pytest.raises` for exception testing

## Dependencies

- pytest>=8.0.0
- Tasks 001 and 002 must be complete

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: false (depends on implementation tasks)

## Definition of Done

- [ ] All test files created
- [ ] Tests cover all acceptance criteria from PRD
- [ ] `pytest tests/loader/` passes with 0 failures
- [ ] Coverage includes edge cases
