---
name: Build and test Docker container
status: open
created: 2026-01-20T20:45:46Z
updated: 2026-01-20T20:47:16Z
github: https://github.com/elysenko/regression-analyzer/issues/31
depends_on: [28, 29, 30]
parallel: false
conflicts_with: []
---

# Task: Build and test Docker container

## Description

Build the Docker image and verify it meets all requirements: successful build, image size under 500MB, container starts correctly, health check works, and API endpoints are accessible.

## Acceptance Criteria

- [ ] Docker image builds successfully
- [ ] Image size is under 500MB
- [ ] Container starts in under 10 seconds
- [ ] Health check endpoint responds with 200
- [ ] API endpoints accessible from host
- [ ] Non-root user verified (runs as appuser)

## Technical Details

Test steps:
1. Build image: `docker build -t regression-analyzer:latest .`
2. Check size: `docker images regression-analyzer:latest --format "{{.Size}}"`
3. Start container: `docker-compose up -d`
4. Test health: `curl http://localhost:8000/api/v1/health`
5. Test API: `curl http://localhost:8000/api/v1/`
6. Verify user: `docker exec <container> whoami` should return `appuser`
7. Stop container: `docker-compose down`

### Validation Commands
```bash
# Build
docker build -t regression-analyzer:latest .

# Check size (should be < 500MB)
docker images regression-analyzer:latest

# Run and test
docker-compose up -d
sleep 5
curl -f http://localhost:8000/api/v1/health
docker-compose down
```

## Dependencies

- [ ] Task 001: Dockerfile
- [ ] Task 002: .dockerignore
- [ ] Task 003: docker-compose.yml

## Effort Estimate

- Size: S
- Hours: 0.5
- Parallel: false (requires all other tasks)

## Definition of Done

- [ ] Image builds without errors
- [ ] All acceptance criteria verified
- [ ] Container cleanup completed
